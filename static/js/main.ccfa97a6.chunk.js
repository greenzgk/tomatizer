(this.webpackJsonppomidorka=this.webpackJsonppomidorka||[]).push([[0],{25:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){"use strict";r.r(t);r(25);var n=r(1),a=r(12),c=r(2),s=r(6),o=r(0),i={count:0,status:"idle",nextAction:"work",workMs:0,breakMs:0},l=n.createContext(null);function u(e){var t=n.useState(i),r=Object(s.a)(t,2),a=r[0],u=r[1],j=n.useMemo((function(){return[a,u]}),[a]);return Object(o.jsx)(l.Provider,Object(c.a)(Object(c.a)({},e),{},{value:j}))}l.displayName="AppStateContext";var j={idle:"\ud83d\udca4",break:"\u2615\ufe0f",work:"\ud83c\udfd7"},b=(r(24),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toLocaleString(void 0,{minimumIntegerDigits:t})}),d=function(e){return Math.floor(e/1e3)%60},f=function(e){return Math.floor(e/1e3/60)%60},x=function(e){return Math.floor(e/1e3/60/60)};function m(e){var t=b(x(e)),r=b(f(e)),n=b(d(e));return"".concat(t,":").concat(r,":").concat(n)}var v=new function(){return new Worker(r.p+"static/js/timer.worker.f753f27a.worker.js")},O=1e3;var h={longBreakInterval:9e5,shortBreakInterval:3e5,workInterval:15e5,workIntervalsCountBeforeLongBreak:4},k=n.createContext(null);function g(e){var t=function(e,t){var r=n.useState(t),a=Object(s.a)(r,2),c=a[0],o=a[1];return n.useEffect((function(){var t=localStorage.getItem(e);t&&o(JSON.parse(t))}),[e]),n.useEffect((function(){var t=function(t){t.key===e&&o(t.newValue?JSON.parse(t.newValue):void 0)};return window.addEventListener("storage",t),function(){return window.removeEventListener("storage",t)}}),[e]),[c,n.useCallback((function(t){localStorage.setItem(e,JSON.stringify(t)),o(t)}),[e])]}("gk.greenz.pomodoro.settings",h),r=Object(s.a)(t,2),a=r[0],i=r[1],l=n.useMemo((function(){return[a,i]}),[i,a]);return Object(o.jsx)(k.Provider,Object(c.a)(Object(c.a)({},e),{},{value:l}))}function p(){var e=n.useContext(k);if(!e)throw new Error("useSettings must be used within the SettingsProvider");return e}k.displayName="SettingsContext";var w=function(e){var t=e.children;return Object(o.jsx)(a.a,{basename:"/pomidorka",children:Object(o.jsx)(u,{children:Object(o.jsx)(g,{children:t})})})},N=r(23),y=r(10),C=r(3),I=function(e){var t=e.primary,r=e.secondary,n=e.className,a=Object(y.a)(e,["primary","secondary","className"]);return Object(o.jsx)("button",Object(c.a)({className:Object(C.a)("px-4 py-2 border-none rounded uppercase shadow-md hover:shadow-lg active:shadow-2xl",t&&"bg-primary text-on-primary hover:bg-primary-dark active:bg-primary-light",r&&"bg-secondary text-on-secondary hover:bg-secondary-dark active:bg-secondary-light",n)},a))},B=function(e){var t=e.primary,r=e.secondary,n=e.className,a=Object(y.a)(e,["primary","secondary","className"]);return Object(o.jsx)("button",Object(c.a)({className:Object(C.a)("rounded-full p-3",!t&&!r&&"hover:bg-hover",t&&"text-on-primary hover:bg-primary-light",r&&"text-on-secondary hover:bg-secondary-light",n)},a))},S=function(e){var t=e.className,r=e.primary,n=void 0===r||r,a=e.secondary,c=e.children;return Object(o.jsx)("header",{className:Object(C.a)("shadow-md flex flex-row items-center gap-4",n&&"bg-primary text-on-primary",a&&"bg-secondary text-on-secondary",t),children:c})},M=function(e){var t=e.children,r=e.className,n=Object(y.a)(e,["children","className"]);return Object(o.jsx)("h6",Object(c.a)(Object(c.a)({className:Object(C.a)("flex-1 p-4",r)},n),{},{children:t}))},E=function(e){var t=e.className,r=Object(y.a)(e,["className"]);return Object(o.jsx)(B,Object(c.a)({className:Object(C.a)("text-2xl outline-none focus:outline-none focus:border-none",t)},r))},L=function(e){var t=e.className,r=e.children;return Object(o.jsx)("div",{className:Object(C.a)("p-4 rounded shadow-md bg-surface text-on-surface",t),children:r})},A=function(e){var t=e.value,r=e.max,n=void 0===r?100:r,a=e.strokeWidth,c=void 0===a?1:a,s=e.primary,i=e.secondary,l=e.className,u=e.children,j=283-283*(t/n);return Object(o.jsxs)("div",{className:Object(C.a)("relative text-center",l),children:[Object(o.jsx)("svg",{className:Object(C.a)(s&&"text-primary",i&&"text-secondary"),viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("circle",{strokeDasharray:283,strokeDashoffset:j,strokeWidth:c,strokeLinecap:"round",className:"fill-transparent transform origin-center -rotate-90 stroke-current",cx:"50",cy:"50",r:"45"})}),u&&Object(o.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:u})]})};function F(e){var t=e.ms,r=e.max,n=b(d(t)),a=b(f(t)),c=0===t?"text-red-500":"";return Object(o.jsx)(A,{secondary:!0,value:t,max:r,className:"w-full max-w-md",children:Object(o.jsxs)("div",{className:Object(C.a)("text-8xl sm:text-9xl",c&&"text-red-500"),children:[Object(o.jsx)("div",{children:a}),Object(o.jsx)("div",{children:n})]})})}var P=n.forwardRef((function(e,t){var r=e.className,n=Object(y.a)(e,["className"]);return Object(o.jsx)("input",Object(c.a)(Object(c.a)({className:Object(C.a)("border-b rounded-none focus:border-primary-light border-on-bg","text"===n.type?"px-2":"pl-2",r)},n),{},{ref:t}))}));function R(e){var t=e.value,r=e.onChange,a=n.useState(0),i=Object(s.a)(a,2),l=i[0],u=i[1],j=n.createRef(),m=n.createRef(),v=n.createRef();n.useEffect((function(){t&&u(t)}),[t]);var O={className:"w-10",type:"text",placeholder:"00",min:0,onChange:function(e){var t,n,a,c,s,o;if(e.target.value.match(/^\d+$/g)){var i=1e3*(60*(60*Number(null!==(t=null===(n=j.current)||void 0===n?void 0:n.value)&&void 0!==t?t:0)+Number(null!==(a=null===(c=m.current)||void 0===c?void 0:c.value)&&void 0!==a?a:0))+Number(null!==(s=null===(o=v.current)||void 0===o?void 0:o.value)&&void 0!==s?s:0));u(i),null===r||void 0===r||r(i)}},onFocus:function(e){e.target.select()}},h=b(x(l)),k=b(f(l)),g=b(d(l));return Object(o.jsxs)("div",{className:"flex flex-row-reverse gap-1",children:[Object(o.jsx)(P,Object(c.a)(Object(c.a)({},O),{},{value:g,ref:v})),Object(o.jsx)("span",{children:":"}),Object(o.jsx)(P,Object(c.a)(Object(c.a)({},O),{},{value:k,ref:m})),Object(o.jsx)("span",{children:":"}),Object(o.jsx)(P,Object(c.a)(Object(c.a)({},O),{},{value:h,ref:j}))]})}P.displayName="TextField";var D=n.memo((function(e){var t=e.label,r=e.symbol,n=e.className;return Object(o.jsx)("span",{className:n,role:"img","aria-label":t,children:r})}));D.displayName="Emoji";var T=function(){return Object(o.jsxs)("footer",{className:"pb-4 text-center text-xs",children:["\xa9 All rights reserved, ",(new Date).getFullYear()]})},J=function(e){return Object(o.jsx)("form",Object(c.a)({},e))},W=function(e){var t=e.label,r=e.col,n=e.className,a=e.children;return Object(o.jsxs)("label",{className:Object(C.a)("flex mb-4 last:mb-0",r&&"flex-col",n),children:[Object(o.jsx)("span",{className:Object(C.a)(!r&&"flex-1"),children:t}),a]})};r(39);var V=function(e){var t=e.children;return Object(o.jsx)(L,{className:"flex flex-col md:flex-row text-xl md:text-2xl justify-between items-center",children:t})},q=function(e){var t=e.children;return Object(o.jsx)("h3",{className:"text-3xl",children:t})},z=function(e){var t=e.children;return Object(o.jsx)("p",{className:"text-right m-0",children:t})},H=n.memo((function(e){var t=e.count;return Object(o.jsxs)(V,{children:[Object(o.jsx)(q,{children:Object(o.jsx)(D,{symbol:"\ud83c\udf45",label:"tomato"})}),Object(o.jsx)(z,{children:t})]})}));H.displayName="CountStatCard";var Y=n.memo((function(e){var t=e.ms,r=e.type;return Object(o.jsxs)(V,{children:[Object(o.jsx)(q,{children:"work"===r?Object(o.jsx)(D,{symbol:"\ud83c\udfd7",label:"crane"}):Object(o.jsx)(D,{symbol:"\u2615\ufe0f",label:"coffee"})}),Object(o.jsx)(z,{children:m(t)})]})}));Y.displayName="TimeStatCard";var $=r(17),G=r(4),K=n.memo((function(){var e=Object(G.f)();return Object(o.jsxs)(S,{primary:!0,children:[Object(o.jsxs)(M,{children:[Object(o.jsx)(D,{symbol:"\ud83c\udf45",label:"tomato"})," Another Pomodoro Timer"]}),Object(o.jsx)(E,{onClick:function(){return e.push("/settings")},children:Object(o.jsx)($.b,{})})]})}));function Q(){var e=function(){var e=n.useContext(l);if(!e)throw new Error("useAppState must be used within the AppStateProvider");return e}(),t=Object(s.a)(e,2),r=t[0],a=t[1],u=p(),x=Object(s.a)(u,1)[0],m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,r=n.useState(e),a=Object(s.a)(r,2),c=a[0],o=a[1],i=n.useRef(),l=n.useRef(),u=n.useState("idle"),j=Object(s.a)(u,2),b=j[0],d=j[1];n.useEffect((function(){o(e)}),[e]),v.onmessage=function(e){var t,r,n=e.data;n>=0?(o(n),null===(t=l.current)||void 0===t||t.call(l,n)):(d("finished"),null===(r=i.current)||void 0===r||r.call(i))};var f=n.useCallback((function(){v.postMessage({action:"stop"}),d("idle")}),[]),x=n.useCallback((function(e,r,n){var a={action:"start",timeout:e,interval:t};v.postMessage(a),d("running"),o(e),i.current=r,l.current=n}),[t]),m=n.useCallback((function(e){d("idle"),o(e)}),[]);return{remainingMs:c,status:b,start:x,stop:f,reset:m}}(x.workInterval),h=m.remainingMs,k=m.start,g=m.stop,w=m.reset,N=m.status,y=(n.useEffect((function(){window.Notification&&"default"===window.Notification.permission&&window.Notification.requestPermission()}),[]),n.useCallback((function(e,t){window.Notification&&"granted"===window.Notification.permission&&new Notification(e,{body:t})}),[])),C=r.count,B=r.status,S=r.nextAction,M=r.workMs,E=r.breakMs;!function(e,t,r){n.useEffect((function(){var n=b(d(e)),a=b(f(e)),c="idle"!==r?"".concat(a,":").concat(n," | "):"";document.title="".concat(t," | ").concat(c).concat(j[r]," - Another Pomodoro Timer")}),[t,e,r])}(h,C,B);var A={longBreak:x.longBreakInterval,break:x.shortBreakInterval,work:x.workInterval},P=n.useCallback((function(){a((function(e){return Object(c.a)(Object(c.a)({},e),{},{workMs:e.workMs+O})}))}),[a]),R=n.useCallback((function(){a((function(e){return Object(c.a)(Object(c.a)({},e),{},{breakMs:e.breakMs+O})}))}),[a]),D=n.useCallback((function(){y("It's working time!"),w(x.workInterval),a((function(e){return Object(c.a)(Object(c.a)({},e),{},{count:e.count+1,nextAction:"work",status:"idle"})}))}),[y,w,a,x.workInterval]),T=n.useCallback((function(){y("It's resting time!"),w(x.shortBreakInterval);var e=C+1,t=e>0&&e%x.workIntervalsCountBeforeLongBreak===0?"longBreak":"break";a((function(e){return Object(c.a)(Object(c.a)({},e),{},{nextAction:t})}))}),[C,y,w,a,x.shortBreakInterval,x.workIntervalsCountBeforeLongBreak]),J=function(){switch(S){case"work":a((function(e){return Object(c.a)(Object(c.a)({},e),{},{status:"work"})})),k(x.workInterval,T,P);break;case"break":a((function(e){return Object(c.a)(Object(c.a)({},e),{},{status:"break"})})),k(x.shortBreakInterval,D,R);break;case"longBreak":a((function(e){return Object(c.a)(Object(c.a)({},e),{},{status:"break"})})),k(x.longBreakInterval,D,R)}},W=function(){g();var e="work"===B?x.workInterval:"break"===S?x.shortBreakInterval:x.longBreakInterval;a((function(t){return Object(c.a)(Object(c.a)({},t),{},{status:"idle",workMs:"work"===B?t.workMs-e+h:t.workMs,breakMs:"work"!==B?t.breakMs-e+h:t.breakMs})})),w(e)},V=function(){a(i),w(x.workInterval)};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(K,{}),Object(o.jsxs)("main",{className:"flex-1 flex px-4 flex-col w-full md:container md:mx-auto gap-4",children:[Object(o.jsxs)("div",{className:"grid grid-cols-3 grid-rows-1 gap-4",children:[Object(o.jsx)(H,{count:C}),Object(o.jsx)(Y,{ms:M,type:"work"}),Object(o.jsx)(Y,{ms:E,type:"break"})]}),Object(o.jsx)(L,{className:"flex-1 flex flex-col items-stretch justify-between",children:Object(o.jsx)("div",{className:"flex-1 flex justify-center items-center",children:Object(o.jsx)(F,{ms:h,max:A[S]})})}),Object(o.jsx)(L,{children:Object(o.jsx)("div",{className:"flex justify-center px-4 gap-4",children:"running"===N?Object(o.jsx)(I,{secondary:!0,onClick:W,children:"Cancel"}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(I,{primary:!0,onClick:J,children:"work"===S?C>0?"Next":"Start":"Rest"}),"work"===S&&C>0&&Object(o.jsx)(I,{secondary:!0,onClick:V,children:"Done"})]})})})]})]})}K.displayName="Header";var U=r(15);function X(){var e=p(),t=Object(s.a)(e,2),r=t[0],a=t[1],i=n.useState(r),l=Object(s.a)(i,2),u=l[0],j=l[1],b=Object(G.f)();n.useEffect((function(){j(r)}),[r]);var d=function(e,t){return j((function(r){return Object(c.a)(Object(c.a)({},r),{},Object(U.a)({},e,Number.isNaN(t)?0:t))}))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(S,{children:[Object(o.jsx)(E,{onClick:function(){return b.goBack()},children:Object(o.jsx)($.a,{})}),Object(o.jsx)(M,{children:"Settings"})]}),Object(o.jsx)("main",{className:"flex-1 px-4 container mx-auto",children:Object(o.jsxs)(L,{children:[Object(o.jsxs)(J,{children:[Object(o.jsx)(W,{label:"Work Interval",children:Object(o.jsx)(R,{value:u.workInterval,onChange:function(e){return d("workInterval",e)}})}),Object(o.jsx)(W,{label:"Short Break Interval",children:Object(o.jsx)(R,{value:u.shortBreakInterval,onChange:function(e){return d("shortBreakInterval",e)}})}),Object(o.jsx)(W,{label:"Long Break Interval",children:Object(o.jsx)(R,{value:u.longBreakInterval,onChange:function(e){return d("longBreakInterval",e)}})}),Object(o.jsx)(W,{label:"Long break after",children:Object(o.jsx)(P,{type:"number",min:"1",value:u.workIntervalsCountBeforeLongBreak,className:"w-10",onChange:function(e){return d("workIntervalsCountBeforeLongBreak",e.target.valueAsNumber)}})})]}),Object(o.jsxs)("div",{className:"flex flex-row justify-end gap-4",children:[Object(o.jsx)(I,{primary:!0,onClick:function(){return a(u)},children:"Save"}),Object(o.jsx)(I,{secondary:!0,onClick:function(){return j(h)},children:"Restore"})]})]})})]})}var Z=function(){return Object(o.jsxs)("div",{className:"min-h-screen min-w-min flex flex-col gap-4 text-on-bg bg-background",children:[Object(o.jsxs)(G.c,{children:[Object(o.jsx)(G.a,{path:"/settings",children:Object(o.jsx)(X,{})}),Object(o.jsx)(G.a,{path:"/",children:Object(o.jsx)(Q,{})})]}),Object(o.jsx)(T,{})]})},_=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,41)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};N.render(Object(o.jsx)(n.StrictMode,{children:Object(o.jsx)(w,{children:Object(o.jsx)(Z,{})})}),document.getElementById("root")),_()}},[[40,1,2]]]);
//# sourceMappingURL=main.ccfa97a6.chunk.js.map